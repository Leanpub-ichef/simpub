<% if book.errors.any? %>
  <ul>
    <% book.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
  </ul>
<% end %>

<%= form_for(book, remote: true) do |f| %>
  <div id="cover-preview" class="w-50">
    <img src="#" alt="" class="w-100">
  </div>

  <div>
    <%= f.hidden_field :cover, value: book.cached_cover_data %>
    <%= f.label :cover, "封面" %>
    <%= f.file_field :cover, id: "cover-input" %>
  </div>

  <div>
    <%= f.label :title, "書籍標題" %>
    <%= f.text_field :title, class:"w-100 mb-3"%>
  </div>

  <div>
    <%= f.label :about, "關於此書", class:"w-100 mb-3" %>
    <%= f.text_area :about %>
  </div>

  <!--
  <div>
    <%= f.label :price, "價格" %>
    <%= f.number_field :price, :step => "0.01" %>
  </div>
  -->

  <!-- 目錄我們自己產生 -->

  <div>
    <%= f.label :tag_items, "標籤" %>
    <div class="mb-3">
      <select class="form-control select optional" multiple="multiple" name="books[tag_items][]" id="book_tag_items">
      <%= options_for_select(@tags = []) %>
      </select>
    </div>
  </div>

  <div>
    <%= f.label :completeness, "完成度" %>
    <%= f.number_field :completeness, class:"w-100 mb-3" %>
  </div>

  <!-- 編輯器另外做一個頁面 -->
  <div>
    <%= f.hidden_field :md, value: book.cached_md_data %>
    <%= f.label :md, "上傳檔案" %>
    <%= f.file_field :md, class:"mb-3" %>
  </div>

  <div>
    <%= f.submit "完成", class:"btn w-50 text-white", style:"background-color: #e09a5f" %>
  </div>
<% end %>
