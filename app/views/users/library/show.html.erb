
<div class="h3 text-white  pl-5 pt-5">Library</div>
<div class="container library">
  <div class="row ">
    <% if @books.count == 0 %>
      <div class="container purchase d-flex text-white text-center">
      <p class=" h2 mx-auto align-self-center">
        <%= link_to "Get some books", books_path%> <br>
        or <br>
        <%= link_to "Is there any book in your shopping cart",cart_path %>
      </p>

</div>
    <% else %>
      <% @books.each do |book| %>
      <div class="col-2">
        <div class="library">
          <div class="cover">
            <!-- 加入判斷避免該欄位使用假圖壞掉的 bug -->
            <a href="#collapseBook" data-toggle="collapse" data-target="#collapseBook">
              <%= render "shared/frontend/book_cover", locals: {book: book, size: :small} %>
            </a>
          </div>
          <div><%= book.title %></div>
          <!-- 加入判斷避免沒上傳檔案的書籍連結壞掉 -->
          <%= link_to  read_book_path(book), method: 'POST',class:"Leanpub text-lg font-extrabold" do %>
            <i class="fab fa-leanpub">Read on Leanpub</i>
          <% end %>
          <% if book.md_data %>
            <p><%= link_to "下載", book.md_url, target: "_blank" %></p>
          <% else %>
            <p>沒有上傳 PDF</p>
          <% end %>
        </div>


        <%#= link_to library_path(book), method: :get do %>
          <div class="book-title"><%= book.title %></div>
        <%# end %>
        <!-- 加入判斷避免沒上傳檔案的書籍連結壞掉 -->
        <% if book.md_data %>
          <p><%= link_to "下載", book.md_url, target: "_blank" %></p>
        <% else %>
          <p>沒有上傳 PDF</p>
        <% end %>

      </div>
      <% end %>
    <% end %>
  </div>
</div>

<div class="collapse" id="collapseBook">
  <div class="card card-body">
    <div class="container-2 d-flex ">
      <div>
        <%#= image_tag book.cover_url(:medium), class: "w-52"%>
        <img src="https://picsum.photos/id/684/500/400" alt=""/>
      </div>
      <div>
        <h2 class="book-info">title</h2>
        <a href="#" class="author">author</a>
        <h2 class="Read this book">Read this book</h2>
        <a href="#" class="PDF"><i class="fas fa-laptop"></i>PDF</a><br>
        <a href="#" class="EPUB"><i class="fas fa-mobile-alt"></i>EPUB</a><br>
        <a href="#" class="MOBI"><i class="fas fa-tablet-alt"></i>MOBI</a><br>
        <a href="#" class="Leanpub"><i class="fab fa-leanpub"></i>Read on Leanpub</a>
      </div>
    </div>
  </div>
</div>

<%# if @show_book %>
  <%#= render "library_info", book: @show_book %>
<%# end %>

